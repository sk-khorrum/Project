<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Webby Nominee Badge</title>
  <style>
    body {
      width: 100vw;
      height: 100vh;
      background: #141414;
      overflow: hidden;
      margin: 0;
    }

    webby-nominee {
      --badge-size: min(30vw, 20rem);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    webby-nominee::before {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: 2;
      display: block;
      width: 150%;
      height: 140%;
      background: radial-gradient(ellipse at 50% 55%, transparent 10%, black 50%);
      transform: translate3d(-50%, -50%, 0);
      content: "";
    }

    webby-nominee::after {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: 5;
      display: block;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at 50% 75%, #f40c3f 20%, transparent 75%);
      mix-blend-mode: overlay;
      transform: translate3d(-50%, -50%, 0);
      content: "";
    }

    webby-nominee .badge {
      position: absolute;
      top: calc(50% - var(--badge-size) * 0.5);
      left: calc(50% - var(--badge-size) * 0.5);
      z-index: 10;
      width: var(--badge-size);
      height: var(--badge-size);
      background: #000c;
      border-radius: 999rem;
      overflow: hidden;
    }

    webby-nominee .badge img {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 2;
      display: block;
      width: 100%;
      height: 100%;
      transition: transform 1s cubic-bezier(0.87, 0, 0.13, 1);
    }

    webby-nominee .badge__vote {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      color: #f40c3f;
      font: 700 40px / 1 "Chivo Mono", monospace;
      text-transform: uppercase;
      transform: translate3d(0, 75%, 0) rotate(45deg);
      transition: transform 1s cubic-bezier(0.83, 0, 0.17, 1);
    }

    webby-nominee a:hover img {
      transform: translate3d(0, -100%, 0) rotate(45deg);
    }

    webby-nominee a:hover .badge__vote {
      transform: translate3d(0, 0, 0) rotate(0);
    }

    webby-nominee .aura {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: 3;
      width: calc(var(--badge-size) * 1.25);
      height: calc(var(--badge-size) * 1.25);
      background: linear-gradient(
          20deg,
          #00f8f1,
          #ffbd1e20 16.5%,
          #fe848f 33%,
          #fe848f20 49.5%,
          #00f8f1 66%,
          #00f8f160 85.5%,
          #ffbd1e 100%
        )
        0 100% / 100% 200%;
      border-radius: 0 0 100% 100%;
      filter: blur(50px);
      mix-blend-mode: plus-lighter;
      opacity: 0.75;
      transform: translate3d(-50%, -50%, 0);
      animation: aura-glow 5s infinite linear;
      pointer-events: none;
    }

    @keyframes aura-glow {
      0% {
        background-position: 0 100%;
      }
      100% {
        background-position: 0 300%;
      }
    }

    webby-nominee .overlay {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        transparent,
        transparent 1px,
        white 1px,
        white 2px
      );
      mix-blend-mode: overlay;
      opacity: 0.5;
      pointer-events: none;
    }

    webby-nominee canvas {
      position: absolute;
      top: 0;
      left: 0;
      display: block;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <webby-nominee>
    <div class="badge js-badge">
      <a href="https://vote.webbyawards.com/PublicVoting#/2025/websites-and-mobile-sites/features-design/best-home-page" target="_blank">
        <img class="js-badge-img" src="https://assets.codepen.io/5817405/Site_Badges_2025_bw_webby_nominee-red.png?v=2" alt="Webby Award Nominee Badge" />
        <span class="badge__vote">Vote Now!</span>
      </a>
    </div>
    <div class="aura"></div>
    <div class="overlay"></div>
    <canvas class="js-canvas"></canvas>
  </webby-nominee>

  <script type="module">
    import easingUtils from "https://esm.sh/easing-utils";

    class WebbyNominee extends HTMLElement {
      connectedCallback() {
        this.canvas = this.querySelector(".js-canvas");
        this.ctx = this.canvas.getContext("2d");
        this.badge = this.querySelector(".js-badge");

        this.discs = [];
        this.lines = [];

        this.setSize();
        this.setDiscs();
        this.setLines();
        this.setParticles();

        this.bindEvents();
        requestAnimationFrame(this.tick.bind(this));
      }

      bindEvents() {
        window.addEventListener("resize", this.onResize.bind(this));
      }

      onResize() {
        this.setSize();
        this.setDiscs();
        this.setLines();
        this.setParticles();
      }

      setSize() {
        this.rect = this.getBoundingClientRect();
        this.badgeRect = this.badge.getBoundingClientRect();
        this.render = {
          width: this.rect.width,
          height: this.rect.height,
          dpi: window.devicePixelRatio
        };
        this.canvas.width = this.render.width * this.render.dpi;
        this.canvas.height = this.render.height * this.render.dpi;
      }

      setDiscs() {
        const { badgeRect } = this;
        const { width, height } = this.rect;
        this.discs = [];
        const diag = Math.hypot(width, height);
        this.startDisc = {
          x: width * 0.5,
          y: height * 0.5,
          w: diag * 0.5,
          h: diag * 0.5
        };
        this.endDisc = {
          x: width * 0.5,
          y: height * 0.5,
          w: badgeRect.width * 0.5,
          h: badgeRect.height * 0.5
        };
        const totalDiscs = 20;
        for (let i = 0; i < totalDiscs; i++) {
          const p = i / totalDiscs;
          const disc = this.tweenDisc({ p });
          this.discs.push(disc);
        }
      }

      setLines() {
        const { width, height } = this.rect;
        this.lines = [];
        const totalLines = 100;
        const linesAngle = (Math.PI * 2) / totalLines;
        for (let i = 0; i < totalLines; i++) {
          const angle = (i * linesAngle + performance.now() * 0.0001) % (Math.PI * 2);
          const p0 = {
            x: width * 0.5 + Math.cos(angle) * this.startDisc.w,
            y: height * 0.5 + Math.sin(angle) * this.startDisc.h
          };
          const p1 = {
            x: width * 0.5 + Math.cos(angle) * this.endDisc.w,
            y: height * 0.5 + Math.sin(angle) * this.endDisc.h
          };
          const l = { x: p1.x - p0.x, y: p1.y - p0.y };
          this.lines.push({ p0, p1, l });
        }
      }

      setParticles() {
        const { width, height } = this.rect;
        this.particles = [];
        const totalParticles = 500;
        for (let i = 0; i < totalParticles; i++) {
          const particle = this.initParticle(true);
          this.particles.push(particle);
        }
      }

      initParticle() {
        const lineIndex = Math.round((this.lines.length - 1) * Math.random());
        const v = 0.005 + Math.random() * 0.005;
        const l = 0.01 + Math.random() * 0.1;
        const a = 0.05 + Math.random() * 0.15;
        return { lineIndex, p: Math.random(), v, l, a };
      }

      tweenValue(start, end, p, ease = false) {
        const delta = end - start;
        const easeFn = easingUtils[
          ease ? "ease" + ease.charAt(0).toUpperCase() + ease.slice(1) : "linear"
        ];
        return start + delta * easeFn(p);
      }

      drawDiscs() {
        const { ctx } = this;
        ctx.strokeStyle = "#444";
        ctx.lineWidth = 2;
        const outerDisc = this.startDisc;
        ctx.beginPath();
        ctx.ellipse(outerDisc.x, outerDisc.y, outerDisc.w, outerDisc.h, 0, 0, Math.PI * 2);
        ctx.stroke();
        ctx.closePath();
        this.discs.forEach((disc) => {
          ctx.beginPath();
          ctx.ellipse(disc.x, disc.y, disc.w, disc.h, 0, 0, Math.PI * 2);
          ctx.stroke();
          ctx.closePath();
        });
      }

      drawLines() {
        const { ctx, lines } = this;
        ctx.beginPath();
        lines.forEach(({ p0, p1 }) => {
          ctx.moveTo(p0.x, p0.y);
          ctx.lineTo(p1.x, p1.y);
        });
        ctx.strokeStyle = "#4449";
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.closePath();
      }

      drawParticles() {
        const { ctx, particles } = this;
        particles.forEach((particle) => {
          const line = this.lines[particle.lineIndex];
          const start = {
            x: line.p0.x + line.l.x * particle.p,
            y: line.p0.y + line.l.y * particle.p
          };
          const p0 = { x: start.x, y: start.y };
          const p1 = { x: start.x + line.l.x * particle.l, y: start.y + line.l.y * particle.l };
          ctx.beginPath();
          ctx.moveTo(p0.x, p0.y);
          ctx.lineTo(p1.x, p1.y);
          ctx.strokeStyle = `rgba(255, 255, 255, ${particle.a})`;
          ctx.lineWidth = 2;
          ctx.stroke();
          ctx.closePath();
        });
      }

      moveDiscs() {
        this.discs.forEach((disc) => {
          disc.p = (disc.p + 0.001) % 1;
          this.tweenDisc(disc);
        });
      }

      moveParticles() {
        this.particles.forEach((particle) => {
          if (particle.p < 1) {
            particle.p += particle.v;
          } else {
            particle.p = 0;
          }
        });
      }

      tweenDisc(disc) {
        disc.x = this.tweenValue(this.startDisc.x, this.endDisc.x, disc.p);
        disc.y = this.tweenValue(this.startDisc.y, this.endDisc.y, disc.p, "inExpo");
        disc.w = this.tweenValue(this.startDisc.w, this.endDisc.w, disc.p, "outCubic");
        disc.h = this.tweenValue(this.startDisc.h, this.endDisc.h, disc.p, "outCubic");
        return disc;
      }

      tick() {
        const { ctx } = this;
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        ctx.save();
        ctx.scale(this.render.dpi, this.render.dpi);
        this.moveDiscs();
        this.moveParticles();
        this.setLines();
        this.drawDiscs();
        this.drawLines();
        this.drawParticles();
        ctx.restore();
        requestAnimationFrame(this.tick.bind(this));
      }
    }

    customElements.define("webby-nominee", WebbyNominee);
  </script>
</body>
</html>
